<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>¬°Feliz Cumplea√±os! üéÇ</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Quicksand:wght@400;500;600&display=swap"
        rel="stylesheet" />
    <style>
        :root {
            --pink: #f9c6d0;
            --peach: #fddcb5;
            --lavender: #d8cef6;
            --mint: #beecd6;
            --sky: #c2e4f8;
            --rose: #e98fa3;
            --gold: #f0c46e;
            --text: #5a3e5b;
            --text-light: #a07da3;
            --white: #fffaf9;
        }

        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            background: var(--white);
            color: var(--text);
            overflow-x: hidden;
        }

        /* ‚îÄ‚îÄ CONFETTI CANVAS ‚îÄ‚îÄ */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 999;
        }

        /* ‚îÄ‚îÄ FLOATING BUBBLES ‚îÄ‚îÄ */
        .bubbles {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .bubble {
            position: absolute;
            bottom: -120px;
            border-radius: 50%;
            opacity: 0.25;
            animation: rise linear infinite;
        }

        @keyframes rise {
            0% {
                transform: translateY(0) scale(1);
                opacity: .25;
            }

            100% {
                transform: translateY(-110vh) scale(1.1);
                opacity: 0;
            }
        }

        /* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
        .hero {
            position: relative;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem 1.5rem 4rem;
            background: linear-gradient(160deg, #fde8ef 0%, #f3e8fd 40%, #e8f4fd 100%);
            overflow: hidden;
            z-index: 1;
        }

        .hero-deco {
            position: absolute;
            border-radius: 50%;
            filter: blur(60px);
            opacity: .45;
        }

        .hero-deco.d1 {
            width: 380px;
            height: 380px;
            background: var(--pink);
            top: -80px;
            left: -100px;
        }

        .hero-deco.d2 {
            width: 300px;
            height: 300px;
            background: var(--lavender);
            bottom: -60px;
            right: -80px;
        }

        .hero-deco.d3 {
            width: 220px;
            height: 220px;
            background: var(--peach);
            bottom: 60px;
            left: 10%;
        }

        .badge {
            display: inline-block;
            background: white;
            color: var(--rose);
            font-size: .75rem;
            font-weight: 600;
            letter-spacing: .12em;
            text-transform: uppercase;
            padding: .4rem 1.2rem;
            border-radius: 50px;
            box-shadow: 0 2px 18px #e98fa340;
            margin-bottom: 1.4rem;
            animation: fadeDown .8s ease both;
        }

        .hero h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2.8rem, 8vw, 6rem);
            line-height: 1.1;
            color: var(--text);
            animation: fadeDown .9s .15s ease both;
        }

        .hero h1 span {
            font-style: italic;
            color: var(--rose);
        }

        /* Animated name field */
        .name-display {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2rem, 6vw, 4.5rem);
            font-style: italic;
            color: var(--rose);
            min-height: 1.2em;
            animation: fadeDown .9s .25s ease both;
        }

        .hero-sub {
            font-size: clamp(.9rem, 2.5vw, 1.15rem);
            color: var(--text-light);
            max-width: 480px;
            margin: 1rem auto 2.2rem;
            animation: fadeDown .9s .35s ease both;
        }

        /* Cake animation */
        .cake-wrap {
            position: relative;
            display: inline-block;
            margin-bottom: 1.8rem;
            animation: fadeDown .9s .05s ease both;
        }

        .cake {
            font-size: clamp(5rem, 14vw, 9rem);
            display: block;
            animation: cakeBounce 2.4s ease-in-out infinite;
            filter: drop-shadow(0 8px 24px #f9c6d055);
        }

        @keyframes cakeBounce {

            0%,
            100% {
                transform: translateY(0) rotate(-2deg);
            }

            50% {
                transform: translateY(-14px) rotate(2deg);
            }
        }

        /* Candles glow */
        .candles {
            position: absolute;
            top: 4px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 6px;
        }

        .candle-flame {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--gold);
            animation: flicker 0.6s ease-in-out infinite alternate;
            box-shadow: 0 0 8px 4px #f0c46e88;
        }

        .candle-flame:nth-child(2) {
            animation-delay: .15s;
        }

        .candle-flame:nth-child(3) {
            animation-delay: .3s;
        }

        @keyframes flicker {
            0% {
                transform: scale(1) translateY(0);
                opacity: .9;
            }

            100% {
                transform: scale(1.3) translateY(-3px);
                opacity: 1;
            }
        }

        /* Name input section */
        .name-section {
            display: flex;
            gap: .6rem;
            flex-wrap: wrap;
            justify-content: center;
            animation: fadeDown .9s .45s ease both;
        }

        .name-section input {
            border: 2px solid #f9c6d0;
            border-radius: 50px;
            padding: .65rem 1.4rem;
            font-family: 'Quicksand', sans-serif;
            font-size: 1rem;
            background: white;
            color: var(--text);
            outline: none;
            transition: border-color .3s, box-shadow .3s;
            width: min(260px, 80vw);
        }

        .name-section input:focus {
            border-color: var(--rose);
            box-shadow: 0 0 0 4px #e98fa322;
        }

        .name-section button {
            background: var(--rose);
            color: white;
            border: none;
            border-radius: 50px;
            padding: .65rem 1.6rem;
            font-family: 'Quicksand', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: transform .2s, box-shadow .2s;
            box-shadow: 0 4px 18px #e98fa355;
        }

        .name-section button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 24px #e98fa366;
        }

        /* ‚îÄ‚îÄ SCROLL ARROW ‚îÄ‚îÄ */
        .scroll-arrow {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            animation: bounce 1.8s ease-in-out infinite;
            cursor: pointer;
            color: var(--text-light);
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateX(-50%) translateY(0);
            }

            50% {
                transform: translateX(-50%) translateY(8px);
            }
        }

        /* ‚îÄ‚îÄ SECTION BASE ‚îÄ‚îÄ */
        section {
            position: relative;
            z-index: 1;
            padding: 5rem 1.5rem;
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: clamp(1.8rem, 5vw, 3rem);
            text-align: center;
            margin-bottom: .5rem;
        }

        .section-sub {
            text-align: center;
            color: var(--text-light);
            margin-bottom: 3rem;
            font-size: .95rem;
        }

        /* ‚îÄ‚îÄ FRASES ‚îÄ‚îÄ */
        .phrases-section {
            background: linear-gradient(160deg, #fef6fb 0%, #f0eeff 100%);
        }

        .phrases-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1.5rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        .phrase-card {
            background: white;
            border-radius: 1.4rem;
            padding: 2rem 1.6rem;
            box-shadow: 0 4px 28px #d8cef620;
            position: relative;
            overflow: hidden;
            transition: transform .3s, box-shadow .3s;
            cursor: default;
        }

        .phrase-card::before {
            content: '"';
            font-family: 'Playfair Display', serif;
            font-size: 6rem;
            color: var(--pink);
            position: absolute;
            top: -1rem;
            left: .8rem;
            line-height: 1;
            opacity: .4;
        }

        .phrase-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 12px 40px #d8cef645;
        }

        .phrase-card p {
            font-size: 1rem;
            line-height: 1.7;
            position: relative;
            z-index: 1;
        }

        .phrase-card .phrase-author {
            margin-top: 1rem;
            font-weight: 600;
            color: var(--rose);
            font-size: .88rem;
        }

        /* Add phrase form */
        .add-phrase-form {
            max-width: 560px;
            margin: 2.5rem auto 0;
            background: white;
            border-radius: 1.4rem;
            padding: 2rem;
            box-shadow: 0 4px 28px #f9c6d025;
        }

        .add-phrase-form h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: var(--text);
        }

        .add-phrase-form textarea,
        .add-phrase-form input[type="text"] {
            width: 100%;
            border: 2px solid #f9c6d0;
            border-radius: .9rem;
            padding: .75rem 1rem;
            font-family: 'Quicksand', sans-serif;
            font-size: .95rem;
            color: var(--text);
            outline: none;
            transition: border-color .3s;
            background: #fffaf9;
            margin-bottom: .9rem;
            resize: vertical;
        }

        .add-phrase-form textarea:focus,
        .add-phrase-form input:focus {
            border-color: var(--rose);
        }

        .add-phrase-form textarea {
            min-height: 90px;
        }

        .btn-rose {
            background: var(--rose);
            color: white;
            border: none;
            border-radius: 50px;
            padding: .7rem 1.8rem;
            font-family: 'Quicksand', sans-serif;
            font-weight: 600;
            font-size: .95rem;
            cursor: pointer;
            transition: transform .2s, box-shadow .2s;
            box-shadow: 0 4px 18px #e98fa344;
        }

        .btn-rose:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 24px #e98fa360;
        }

        /* ‚îÄ‚îÄ GALER√çA ‚îÄ‚îÄ */
        .gallery-section {
            background: linear-gradient(160deg, #f0f8ff 0%, #fff0f6 100%);
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.2rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        .photo-slot {
            aspect-ratio: 1;
            border-radius: 1.2rem;
            overflow: hidden;
            position: relative;
            background: linear-gradient(135deg, var(--pink), var(--lavender));
            cursor: pointer;
            transition: transform .3s, box-shadow .3s;
            box-shadow: 0 4px 20px #f9c6d030;
        }

        .photo-slot:hover {
            transform: scale(1.04);
            box-shadow: 0 10px 36px #e98fa340;
        }

        .photo-slot img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }

        .photo-slot .placeholder {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: .5rem;
            color: white;
            font-size: .85rem;
            font-weight: 600;
        }

        .photo-slot .placeholder svg {
            opacity: .8;
        }

        .photo-slot input[type="file"] {
            position: absolute;
            inset: 0;
            opacity: 0;
            cursor: pointer;
        }

        .photo-slot.has-photo .placeholder {
            display: none;
        }

        .photo-slot.has-photo img {
            display: block;
        }

        .gallery-note {
            text-align: center;
            color: var(--text-light);
            font-size: .85rem;
            margin-top: 1.2rem;
        }

        /* ‚îÄ‚îÄ COUNTDOWN ‚îÄ‚îÄ */
        .countdown-section {
            background: linear-gradient(160deg, #fef9ee 0%, #f9eeff 100%);
            text-align: center;
        }

        .countdown-wrap {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }

        .count-box {
            background: white;
            border-radius: 1.2rem;
            padding: 1.4rem 1.8rem;
            min-width: 90px;
            box-shadow: 0 4px 24px #f9c6d030;
            transition: transform .3s;
        }

        .count-box:hover {
            transform: translateY(-4px);
        }

        .count-box .number {
            font-family: 'Playfair Display', serif;
            font-size: 2.8rem;
            font-weight: 700;
            color: var(--rose);
            line-height: 1;
        }

        .count-box .label {
            font-size: .8rem;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: .08em;
            margin-top: .4rem;
        }

        /* Birthday date input */
        .date-input-wrap {
            display: flex;
            justify-content: center;
            gap: .6rem;
            flex-wrap: wrap;
            margin-bottom: 2rem;
        }

        .date-input-wrap input[type="date"] {
            border: 2px solid #f9c6d0;
            border-radius: 50px;
            padding: .6rem 1.2rem;
            font-family: 'Quicksand', sans-serif;
            font-size: .95rem;
            color: var(--text);
            background: white;
            outline: none;
            transition: border-color .3s;
        }

        .date-input-wrap input:focus {
            border-color: var(--rose);
        }

        /* ‚îÄ‚îÄ MENSAJE FINAL ‚îÄ‚îÄ */
        .final-section {
            background: linear-gradient(160deg, #f3e8fd 0%, #fde8ef 60%, #fef6d9 100%);
            text-align: center;
            padding: 7rem 1.5rem;
        }

        .final-section h2 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2rem, 6vw, 4rem);
            margin-bottom: 1rem;
        }

        .hearts-row {
            font-size: 2rem;
            letter-spacing: .3em;
            animation: heartBeat 1.4s ease-in-out infinite;
        }

        @keyframes heartBeat {

            0%,
            100% {
                transform: scale(1);
            }

            15% {
                transform: scale(1.2);
            }

            30% {
                transform: scale(1);
            }

            45% {
                transform: scale(1.15);
            }
        }

        /* ‚îÄ‚îÄ ANIMATIONS ‚îÄ‚îÄ */
        @keyframes fadeDown {
            from {
                opacity: 0;
                transform: translateY(-24px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .reveal {
            opacity: 0;
            transform: translateY(36px);
            transition: opacity .7s ease, transform .7s ease;
        }

        .reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
        footer {
            text-align: center;
            padding: 1.5rem;
            font-size: .8rem;
            color: var(--text-light);
            background: white;
        }

        /* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 1.5rem;
            background: var(--rose);
            color: white;
            padding: .8rem 1.4rem;
            border-radius: 50px;
            font-size: .9rem;
            font-weight: 600;
            box-shadow: 0 6px 24px #e98fa355;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity .3s, transform .3s;
            z-index: 1000;
            pointer-events: none;
        }

        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ */
        @media (max-width: 480px) {
            .gallery-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .countdown-wrap {
                gap: .8rem;
            }

            .count-box {
                min-width: 70px;
                padding: 1rem 1rem;
            }

            .count-box .number {
                font-size: 2rem;
            }
        }
    </style>
</head>

<body>

    <canvas id="confetti-canvas"></canvas>

    <!-- Floating bubbles -->
    <div class="bubbles" id="bubbles"></div>

    <!-- ‚ïê‚ïê‚ïê HERO ‚ïê‚ïê‚ïê -->
    <section class="hero" id="home">
        <div class="hero-deco d1"></div>
        <div class="hero-deco d2"></div>
        <div class="hero-deco d3"></div>

        <div class="badge">‚ú® Un d√≠a muy especial ‚ú®</div>

        <div class="cake-wrap">
            <div class="candles">
                <div class="candle-flame"></div>
                <div class="candle-flame"></div>
                <div class="candle-flame"></div>
            </div>
            <span class="cake">üéÇ</span>
        </div>

        <h1>¬°Feliz<br><span>Cumplea√±os</span>!</h1>

        <div class="name-display" id="name-display">‚Äî tu nombre aqu√≠ ‚Äî</div>

        <p class="hero-sub">Hoy el universo celebra que llegaste a este mundo. Que este d√≠a est√© lleno de amor, alegr√≠a
            y magia. üå∏</p>

        <div class="name-section">
            <input type="text" id="name-input" placeholder="Escribe el nombre especial..." maxlength="30" />
            <button onclick="setName()">üéÄ Dedicar</button>
        </div>

        <div class="scroll-arrow" onclick="document.getElementById('phrases').scrollIntoView({behavior:'smooth'})">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 5v14M5 12l7 7 7-7" />
            </svg>
        </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê FRASES ‚ïê‚ïê‚ïê -->
    <section class="phrases-section" id="phrases">
        <h2 class="section-title reveal">üíå Frases del Coraz√≥n</h2>
        <p class="section-sub reveal">Palabras que nacen del amor y el cari√±o</p>

        <div class="phrases-grid" id="phrases-grid">
            <!-- Default phrases -->
            <div class="phrase-card reveal">
                <p>Que cada vela que apagues encienda un nuevo sue√±o en tu coraz√≥n.</p>
                <div class="phrase-author">‚Äî Con todo el amor del mundo</div>
            </div>
            <div class="phrase-card reveal">
                <p>Hoy el cielo brilla m√°s porque es tu cumplea√±os. El mundo es mejor contigo en √©l.</p>
                <div class="phrase-author">‚Äî Siempre a tu lado</div>
            </div>
            <div class="phrase-card reveal">
                <p>Que este a√±o que comienza te traiga tantas alegr√≠as como estrellas hay en el cielo.</p>
                <div class="phrase-author">‚Äî Con cari√±o infinito</div>
            </div>
            <div class="phrase-card reveal">
                <p>Tu sonrisa es el regalo m√°s hermoso que el universo nos ha dado. ¬°Felicidades!</p>
                <div class="phrase-author">‚Äî Tu mayor admirador/a</div>
            </div>
        </div>

        <!-- Add phrase form -->
        <div class="add-phrase-form reveal">
            <h3>‚úçÔ∏è Agrega tu frase especial</h3>
            <textarea id="phrase-text" placeholder="Escribe tu mensaje de coraz√≥n..."></textarea>
            <input type="text" id="phrase-author" placeholder="¬øDe parte de qui√©n?" />
            <button class="btn-rose" onclick="addPhrase()">üíå Agregar mensaje</button>
        </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê GALER√çA ‚ïê‚ïê‚ïê -->
    <section class="gallery-section" id="gallery">
        <h2 class="section-title reveal">üì∏ Momentos Especiales</h2>
        <p class="section-sub reveal">Haz clic en cada espacio para agregar tus fotos favoritas</p>

        <div class="gallery-grid" id="gallery-grid">
            <!-- 6 photo slots generated by JS -->
        </div>
        <p class="gallery-note reveal">üå∏ Las fotos solo se guardan en tu dispositivo</p>
    </section>

    <!-- ‚ïê‚ïê‚ïê COUNTDOWN ‚ïê‚ïê‚ïê -->
    <section class="countdown-section" id="countdown">
        <h2 class="section-title reveal">üéâ Contador de Celebraci√≥n</h2>
        <p class="section-sub reveal">¬øCu√°nto falta para el pr√≥ximo cumplea√±os?</p>

        <div class="date-input-wrap reveal">
            <input type="date" id="bday-date" />
            <button class="btn-rose" onclick="setCountdown()">üéÇ Calcular</button>
        </div>

        <div class="countdown-wrap" id="countdown-wrap">
            <div class="count-box reveal">
                <div class="number" id="cd-days">‚Äî</div>
                <div class="label">D√≠as</div>
            </div>
            <div class="count-box reveal">
                <div class="number" id="cd-hours">‚Äî</div>
                <div class="label">Horas</div>
            </div>
            <div class="count-box reveal">
                <div class="number" id="cd-mins">‚Äî</div>
                <div class="label">Minutos</div>
            </div>
            <div class="count-box reveal">
                <div class="number" id="cd-secs">‚Äî</div>
                <div class="label">Segundos</div>
            </div>
        </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê FINAL MESSAGE ‚ïê‚ïê‚ïê -->
    <section class="final-section" id="final">
        <div class="hearts-row reveal">üå∏ üíñ üå∏ üíñ üå∏</div>
        <h2 class="reveal" style="margin-top:1.2rem;">
            ¬°Que tu d√≠a sea tan<br />
            <span style="color:var(--rose); font-style:italic;">extraordinario</span><br />
            como t√∫!
        </h2>
        <p class="reveal"
            style="max-width:480px; margin:1.2rem auto 0; color:var(--text-light); font-size:1.05rem; line-height:1.8;">
            Que este nuevo a√±o de vida est√© lleno de momentos m√°gicos, risas
            interminables y amor por todas partes. ¬°Mereces todo lo mejor! ‚ú®
        </p>
        <div class="hearts-row reveal" style="margin-top:2rem;">üéÄ üéÇ üéÅ üéâ üéà</div>
    </section>

    <footer>Hecho con üíñ para alguien muy especial</footer>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <script>
        /* ‚îÄ‚îÄ BUBBLES ‚îÄ‚îÄ */
        (function () {
            const wrap = document.getElementById('bubbles');
            const colors = ['#f9c6d0', '#fddcb5', '#d8cef6', '#beecd6', '#c2e4f8'];
            for (let i = 0; i < 18; i++) {
                const b = document.createElement('div');
                b.className = 'bubble';
                const size = 30 + Math.random() * 80;
                b.style.cssText = `
      width:${size}px; height:${size}px;
      left:${Math.random() * 100}%;
      background:${colors[Math.floor(Math.random() * colors.length)]};
      animation-duration:${10 + Math.random() * 18}s;
      animation-delay:${Math.random() * 12}s;
    `;
                wrap.appendChild(b);
            }
        })();

        /* ‚îÄ‚îÄ CONFETTI ‚îÄ‚îÄ */
        const canvas = document.getElementById('confetti-canvas');
        const ctx = canvas.getContext('2d');
        let confettiPieces = [];
        let confettiRunning = false;

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function launchConfetti() {
            confettiPieces = [];
            const colors = ['#f9c6d0', '#fddcb5', '#d8cef6', '#beecd6', '#c2e4f8', '#e98fa3', '#f0c46e'];
            for (let i = 0; i < 140; i++) {
                confettiPieces.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    r: 4 + Math.random() * 7,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    speed: 1.5 + Math.random() * 3,
                    spin: Math.random() * Math.PI * 2,
                    spinSpeed: (Math.random() - .5) * 0.12,
                    drift: (Math.random() - .5) * 1.2,
                    shape: Math.random() < .5 ? 'rect' : 'circle',
                    w: 6 + Math.random() * 8,
                    h: 10 + Math.random() * 14,
                });
            }
            if (!confettiRunning) {
                confettiRunning = true;
                animConfetti();
            }
        }

        function animConfetti() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            confettiPieces.forEach(p => {
                p.y += p.speed;
                p.x += p.drift;
                p.spin += p.spinSpeed;
                ctx.save();
                ctx.translate(p.x, p.y);
                ctx.rotate(p.spin);
                ctx.fillStyle = p.color;
                if (p.shape === 'circle') {
                    ctx.beginPath();
                    ctx.arc(0, 0, p.r, 0, Math.PI * 2);
                    ctx.fill();
                } else {
                    ctx.fillRect(-p.w / 2, -p.h / 2, p.w, p.h);
                }
                ctx.restore();
            });
            confettiPieces = confettiPieces.filter(p => p.y < canvas.height + 30);
            if (confettiPieces.length > 0) requestAnimationFrame(animConfetti);
            else confettiRunning = false;
        }

        /* ‚îÄ‚îÄ SET NAME ‚îÄ‚îÄ */
        function setName() {
            const val = document.getElementById('name-input').value.trim();
            if (!val) { showToast('Por favor escribe un nombre üíå'); return; }
            const display = document.getElementById('name-display');
            display.style.opacity = 0;
            setTimeout(() => {
                display.textContent = val;
                display.style.transition = 'opacity .5s';
                display.style.opacity = 1;
            }, 300);
            document.title = `¬°Feliz Cumplea√±os ${val}! üéÇ`;
            launchConfetti();
            showToast(`¬°Dedicado a ${val}! üéâ`);
        }
        document.getElementById('name-input').addEventListener('keydown', e => { if (e.key === 'Enter') setName(); });

        /* ‚îÄ‚îÄ PHRASES ‚îÄ‚îÄ */
        function addPhrase() {
            const text = document.getElementById('phrase-text').value.trim();
            const author = document.getElementById('phrase-author').value.trim() || 'An√≥nimo';
            if (!text) { showToast('Escribe tu mensaje primero üí¨'); return; }

            const grid = document.getElementById('phrases-grid');
            const card = document.createElement('div');
            card.className = 'phrase-card reveal visible';
            card.innerHTML = `<p>${escapeHtml(text)}</p><div class="phrase-author">‚Äî ${escapeHtml(author)}</div>`;
            card.style.animation = 'fadeDown .6s ease both';
            grid.appendChild(card);

            document.getElementById('phrase-text').value = '';
            document.getElementById('phrase-author').value = '';
            showToast('¬°Mensaje agregado! üíñ');
            launchConfetti();
        }

        function escapeHtml(s) { const d = document.createElement('div'); d.textContent = s; return d.innerHTML; }

        /* ‚îÄ‚îÄ GALLERY ‚îÄ‚îÄ */
        const colors = [
            'linear-gradient(135deg,#f9c6d0,#fddcb5)',
            'linear-gradient(135deg,#d8cef6,#beecd6)',
            'linear-gradient(135deg,#c2e4f8,#f9c6d0)',
            'linear-gradient(135deg,#fddcb5,#d8cef6)',
            'linear-gradient(135deg,#beecd6,#c2e4f8)',
            'linear-gradient(135deg,#f9c6d0,#d8cef6)',
        ];
        const grid = document.getElementById('gallery-grid');
        for (let i = 0; i < 6; i++) {
            const slot = document.createElement('div');
            slot.className = 'photo-slot reveal';
            slot.style.background = colors[i];
            slot.innerHTML = `
    <img src="" alt="Foto ${i + 1}" />
    <div class="placeholder">
      <svg width="36" height="36" fill="none" stroke="white" stroke-width="2" viewBox="0 0 24 24">
        <rect x="3" y="3" width="18" height="18" rx="3"/><circle cx="8.5" cy="8.5" r="1.5"/>
        <path d="M21 15l-5-5L5 21"/>
      </svg>
      <span>Toca para agregar foto</span>
    </div>
    <input type="file" accept="image/*" onchange="loadPhoto(this)" title="Agregar foto"/>
  `;
            grid.appendChild(slot);
        }

        function loadPhoto(input) {
            if (!input.files[0]) return;
            const slot = input.parentElement;
            const img = slot.querySelector('img');
            const reader = new FileReader();
            reader.onload = e => {
                img.src = e.target.result;
                slot.classList.add('has-photo');
                launchConfetti();
                showToast('¬°Foto agregada! üì∏');
            };
            reader.readAsDataURL(input.files[0]);
        }

        /* ‚îÄ‚îÄ COUNTDOWN ‚îÄ‚îÄ */
        let countdownInterval = null;
        function setCountdown() {
            const val = document.getElementById('bday-date').value;
            if (!val) { showToast('Selecciona una fecha üìÖ'); return; }

            if (countdownInterval) clearInterval(countdownInterval);

            function update() {
                const now = new Date();
                let target = new Date(val + 'T00:00:00');

                // Adjust to next occurrence
                if (target <= now) {
                    target.setFullYear(now.getFullYear());
                    if (target <= now) target.setFullYear(now.getFullYear() + 1);
                }

                const diff = target - now;
                if (diff <= 0) {
                    document.getElementById('cd-days').textContent = '0';
                    document.getElementById('cd-hours').textContent = '0';
                    document.getElementById('cd-mins').textContent = '0';
                    document.getElementById('cd-secs').textContent = '0';
                    clearInterval(countdownInterval);
                    launchConfetti();
                    showToast('üéâ ¬°Es HOY! ¬°FELIZ CUMPLEA√ëOS!');
                    return;
                }

                const days = Math.floor(diff / 86400000);
                const hours = Math.floor((diff % 86400000) / 3600000);
                const mins = Math.floor((diff % 3600000) / 60000);
                const secs = Math.floor((diff % 60000) / 1000);

                document.getElementById('cd-days').textContent = days;
                document.getElementById('cd-hours').textContent = hours;
                document.getElementById('cd-mins').textContent = mins;
                document.getElementById('cd-secs').textContent = secs;
            }
            update();
            countdownInterval = setInterval(update, 1000);
            showToast('¬°Contador iniciado! ‚è≥');
        }

        /* ‚îÄ‚îÄ SCROLL REVEAL ‚îÄ‚îÄ */
        const observer = new IntersectionObserver(entries => {
            entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('visible'); });
        }, { threshold: .12 });
        document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

        /* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
        let toastTimer;
        function showToast(msg) {
            const t = document.getElementById('toast');
            t.textContent = msg;
            t.classList.add('show');
            clearTimeout(toastTimer);
            toastTimer = setTimeout(() => t.classList.remove('show'), 2800);
        }

        /* ‚îÄ‚îÄ INITIAL CONFETTI ‚îÄ‚îÄ */
        window.addEventListener('load', () => { setTimeout(launchConfetti, 600); });
    </script>
</body>

</html>