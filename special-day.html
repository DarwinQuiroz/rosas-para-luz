<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para Mi Persona Favorita</title>

    <link rel="icon" href="assets/img/flowers.png" type="image/x-icon" />

    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lora:wght@400;700&family=Roboto:wght@300&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Lora', serif;
            background: linear-gradient(135deg, #fff1f5 0%, #f5e6f5 50%, #ffe4e9 100%);
            background-attachment: fixed;
            color: #2d1a2b;
            line-height: 1.2;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animaciones mejoradas */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInFromTop {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes heartFall {
            0% {
                transform: translateY(-100vh) rotate(0deg) scale(0.8);
                opacity: 1;
            }

            50% {
                transform: translateY(50vh) rotate(180deg) scale(1.2);
                opacity: 0.9;
            }

            100% {
                transform: translateY(120vh) rotate(360deg) scale(0.5);
                opacity: 0;
            }
        }

        @keyframes starHeartForm {
            0% {
                transform: scale(0) translate(0, 0) rotate(0deg);
                opacity: 0;
            }

            50% {
                transform: scale(1.5) translate(var(--tx), var(--ty)) rotate(180deg);
                opacity: 1;
            }

            100% {
                transform: scale(0) translate(var(--tx), var(--ty)) rotate(360deg);
                opacity: 0;
            }
        }

        @keyframes fireworkLaunch {
            0% {
                transform: translateY(100vh) scale(0.5);
                opacity: 1;
            }

            70% {
                transform: translateY(30vh) scale(0.8);
                opacity: 1;
            }

            100% {
                transform: translateY(20vh) scale(1);
                opacity: 0;
            }
        }

        @keyframes fireworkExplode {
            0% {
                transform: scale(0) translate(0, 0);
                opacity: 1;
            }

            100% {
                transform: scale(1) translate(var(--px), var(--py));
                opacity: 0;
            }
        }

        @keyframes letterFloat {
            0% {
                transform: translateY(100vh) rotate(-15deg) scale(0.8);
                opacity: 0;
            }

            20% {
                transform: translateY(70vh) rotate(0deg) scale(1);
                opacity: 1;
            }

            80% {
                transform: translateY(-20vh) rotate(15deg) scale(1.1);
                opacity: 1;
            }

            100% {
                transform: translateY(-100vh) rotate(-10deg) scale(0.7);
                opacity: 0;
            }
        }

        @keyframes pulseGlow {
            0% {
                box-shadow: 0 0 8px #d81b60;
                transform: scale(1);
            }

            50% {
                box-shadow: 0 0 20px #d81b60;
                transform: scale(1.05);
            }

            100% {
                box-shadow: 0 0 8px #d81b60;
                transform: scale(1);
            }
        }

        @keyframes blinkCursor {
            50% {
                opacity: 0;
            }
        }

        .cursor {
            display: inline-block;
            width: 2px;
            height: 1em;
            background: #d81b60;
            margin-left: 2px;
            animation: blinkCursor 0.7s step-end infinite;
            vertical-align: middle;
        }

        .line.active .cursor {
            display: inline-block;
        }

        /* Contenedor principal */
        .container {
            max-width: 1000px;
            margin: 2rem auto;
            padding: 2.5rem;
            background: linear-gradient(135deg, #fff5f7 0%, #fae4ee 100%);
            border-radius: 25px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            animation: fadeIn 1.2s ease-in-out;
            position: relative;
            z-index: 1;
            border: 1px solid #f8bbd0;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .header h1 {
            font-family: 'Cinzel', serif;
            font-size: 3rem;
            color: #d81b60;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.15);
            animation: slideInFromTop 0.8s ease-in-out;
            margin-bottom: 1rem;
        }

        .header p {
            font-size: 1.5rem;
            color: #3f2a44;
            max-width: 600px;
            margin: 0 auto;
            font-style: italic;
        }

        /* Secci√≥n de celebraci√≥n */
        .celebration {
            padding: 2.5rem;
            border-radius: 20px;
            background: linear-gradient(135deg, #fce4ec, #fff8e1);
            margin-bottom: 3rem;
            border: 2px solid #f8bbd0;
        }

        .celebration-text {
            font-size: 1.6rem;
            text-align: center;
            color: #2d1a2b;
            margin-bottom: 2rem;
        }

        .highlight {
            color: #d81b60;
            font-weight: 700;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        /* Carousel para fotos */
        .carousel {
            position: relative;
            width: 100%;
            aspect-ratio: 16 / 9;
            max-width: 800px;
            margin: 60px auto;
            overflow: hidden;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .carousel .image-container {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            transform: translateX(100%);
            transition: opacity 0.8s ease-in-out, transform 0.8s ease-in-out;
            z-index: 1;
        }

        .carousel .image-container.active {
            opacity: 1;
            transform: translateX(0);
            z-index: 2;
        }

        .carousel .image-container img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            position: relative;
            z-index: 2;
        }

        .carousel .image-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: inherit;
            background-size: cover;
            background-position: center;
            filter: blur(52px);
            z-index: 1;
            opacity: 0.9;
            border-radius: 20px;
        }

        .carousel-nav {
            position: absolute;
            top: 50%;
            width: 100%;
            display: flex;
            justify-content: space-between;
            transform: translateY(-50%);
            padding: 0 10px;
            z-index: 3;
        }

        .carousel-nav button {
            background: #3f2a44;
            color: white;
            border: none;
            padding: 1rem;
            cursor: pointer;
            font-size: 1.5rem;
            transition: all 0.3s ease;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .carousel-nav button:hover {
            background: #d81b60;
            transform: scale(1.1);
        }

        /* Secci√≥n de sorpresas */
        .surprises {
            text-align: center;
            margin: 3rem 0;
            background: linear-gradient(135deg, #fce4ec, #fff8e1);
            padding: 2.5rem;
            border-radius: 20px;
            border: 2px solid #f8bbd0;
        }

        .surprises h2 {
            font-family: 'Cinzel', serif;
            font-size: 2.5rem;
            color: #d81b60;
            margin-bottom: 2rem;
            animation: slideInFromTop 0.8s ease-in-out;
        }

        .surprise-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem 0.5rem;
            margin-top: 2rem;
            justify-items: center;
        }

        /* Botones de acci√≥n mejorados */
        .action-btn {
            padding: 1.2rem 2rem;
            background: linear-gradient(135deg, #d81b60, #ad1457);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-family: 'Cinzel', serif;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            width: 80%;
            text-align: center;
        }

        .action-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
            background: linear-gradient(135deg, #ad1457, #d81b60);
        }

        .action-btn:active {
            transform: translateY(-2px);
        }

        /* Secci√≥n de promesas */
        .promises {
            margin: 3rem 0;
        }

        .promises h2 {
            font-family: 'Cinzel', serif;
            font-size: 2.5rem;
            text-align: center;
            color: #d81b60;
            margin-bottom: 2rem;
            animation: slideInFromTop 0.8s ease-in-out;
        }

        .promise-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .promise-item {
            background: #fff8e6;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
            border: 2px solid #f8bbd0;
            text-align: center;
        }

        .promise-item:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }

        .promise-item h3 {
            font-family: 'Cinzel', serif;
            color: #d81b60;
            margin-bottom: 1rem;
            font-size: 1.4rem;
        }

        /* Contador regresivo */
        .countdown {
            text-align: center;
            margin: 3rem 0;
            background: #fff8e6;
            padding: 2.5rem;
            border-radius: 20px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
            border: 2px solid #f8bbd0;
        }

        .countdown h2 {
            font-family: 'Cinzel', serif;
            font-size: 2.5rem;
            color: #d81b60;
            margin-bottom: 2rem;
        }

        .countdown-timer {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            justify-content: center;
        }

        .countdown-item {
            background: linear-gradient(135deg, #d81b60, #ad1457);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            min-width: 80px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
            text-align: center;
        }

        .countdown-item:hover {
            transform: scale(1.05);
        }

        .countdown-number {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.3rem;
        }

        .countdown-label {
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Elementos decorativos mejorados */
        .decorations {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 1000;
        }

        .heart {
            position: absolute;
            font-size: 2rem;
            color: #f06292;
            text-shadow: 0 0 12px rgba(240, 98, 146, 0.9);
            animation: heartFall 8s linear infinite;
        }

        .star {
            position: absolute;
            width: 15px;
            height: 15px;
            background: linear-gradient(45deg, #ff0000, #cc0000);
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            animation: starHeartForm 2.5s ease-in-out;
            box-shadow: 0 0 12px rgba(255, 0, 0, 0.9);
        }

        .firework {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            animation: fireworkLaunch 1.5s ease-out forwards;
            filter: brightness(1) contrast(3);
            box-shadow: 0 0 10px var(--c), 0 0 20px var(--c), 0 0 40px var(--c);
        }

        .firework-particle.trail {
            border-radius: 50%;
            background: var(--c, #ff0);
            filter: blur(2px) brightness(1.2);
            box-shadow: 0 0 6px var(--c), 0 0 12px var(--c), 0 0 18px var(--c);
        }

        .firework-particle {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            animation: fireworkExplode 1s ease-out forwards;
        }

        .love-letter {
            position: absolute;
            font-size: 1.5rem;
            color: #d81b60;
            text-shadow: 0 0 10px rgba(216, 27, 96, 0.9);
            animation: letterFloat 10s ease-in-out infinite;
            font-weight: bold;
            font-family: 'Lora', serif;
        }

        /* Modal de mensaje especial */
        /* Modal de mensaje especial - VERSI√ìN CORREGIDA */
        #letterOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(63, 42, 68, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            transition: opacity 0.5s ease;
            padding: 20px;
            /* Agregar padding para m√≥viles */
        }

        #letterOverlay.show {
            display: flex;
            opacity: 1;
        }

        .message-content {
            background: #fff5f7;
            border-radius: 25px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            /* Limitar altura m√°xima */
            position: relative;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
            border: 3px solid #f8bbd0;
            animation: fadeIn 0.5s ease-in-out;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            /* Importante para el scroll interno */
        }

        .message-content h2 {
            font-family: 'Cinzel', serif;
            font-size: 2.8rem;
            color: #d81b60;
            margin: 0;
            padding: 2rem 3rem 1rem 3rem;
            text-align: center;
            flex-shrink: 0;
            /* No se encoge */
            border-bottom: 1px solid #f8bbd0;
        }

        .message-content #typewriterText {
            font-size: 1.2rem;
            line-height: 1.5;
            color: #2d1a2b;
            text-align: left;
            white-space: pre-wrap;
            padding: 1.5rem 3rem;
            overflow-y: auto;
            /* Solo el texto tiene scroll */
            flex-grow: 1;
            /* Toma el espacio disponible */
            max-height: calc(90vh - 200px);
            /* Altura m√°xima menos espacio para t√≠tulo y firma */
        }

        .message-content #typewriterText .line {
            display: block;
            margin-bottom: 0.5rem;
        }

        /* Firma - siempre fija al final */
        .message-content .signature {
            font-family: 'Cinzel', serif;
            font-size: 1.8rem;
            color: #d81b60;
            text-align: center;
            padding: 1rem 3rem 2rem 3rem;
            flex-shrink: 0;
            /* No se encoge */
            border-top: 1px solid #f8bbd0;
            background: #fff5f7;
            /* Mismo fondo para mantener consistencia */
        }

        .close-message {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: #3f2a44;
            transition: color 0.3s ease;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            /* Asegurar que est√© sobre el contenido */
        }

        .close-message:hover {
            color: #d81b60;
            transform: scale(1.2);
        }

        /* Estilos para el scrollbar del √°rea de texto */
        .message-content #typewriterText::-webkit-scrollbar {
            width: 8px;
        }

        .message-content #typewriterText::-webkit-scrollbar-track {
            background: #f8bbd0;
            border-radius: 10px;
        }

        .message-content #typewriterText::-webkit-scrollbar-thumb {
            background: #d81b60;
            border-radius: 10px;
        }

        .message-content #typewriterText::-webkit-scrollbar-thumb:hover {
            background: #ad1457;
        }

        /* Responsive para m√≥viles */


        /* Footer */
        .footer {
            text-align: center;
            margin-top: 3rem;
            padding: 2rem;
            color: #3f2a44;
            font-size: 1rem;
            font-style: italic;
            border-top: 2px solid #f8bbd0;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                margin: 0rem;
                padding: 1.5rem;
                border-radius: 0px;
            }

            #letterOverlay {
                padding: 10px;
            }

            .message-content {
                max-height: 95vh;
                border-radius: 15px;
            }

            .message-content h2 {
                font-size: 2.2rem;
                padding: 1.5rem 2rem 1rem 2rem;
            }

            .message-content #typewriterText {
                font-size: 1.1rem;
                padding: 1rem 2rem;
                max-height: calc(95vh - 180px);
            }

            .message-content .signature {
                font-size: 1.5rem;
                padding: 1rem 2rem 1.5rem 2rem;
            }

            .header {
                margin-bottom: 2rem;
            }

            .action-btn {
                width: 100%;
                font-size: 0.9rem;
                padding: 1rem 1rem;
            }

            .header h1 {
                font-size: 2.5rem;
                line-height: 1;
            }

            .header p {
                font-size: 1.2rem;
            }

            .celebration {
                padding: 0.8rem;
            }

            .celebration-text {
                font-size: 1.3rem;
                margin: 1rem;
            }

            .carousel {
                margin: 30px auto;
            }

            .surprise-buttons {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem 0.5rem;
            }

            .countdown-timer {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.5rem;
                padding: 0 1rem;
            }

            .countdown-item {
                min-width: 70px;
                padding: 0.8rem;
            }

            .countdown-number {
                font-size: 1.8rem;
            }

            .countdown-label {
                font-size: 0.8rem;
            }

            .star {
                width: 10px;
                height: 10px;
            }
        }

        @media (max-width: 576px) {
            .countdown-timer {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.5rem;
            }

            .message-content h2 {
                font-size: 1.8rem;
                padding: 1rem 1.5rem 0.8rem 1.5rem;
            }

            .message-content #typewriterText {
                font-size: 1rem;
                padding: 0.8rem 1.5rem;
                max-height: calc(95vh - 160px);
            }

            .message-content .signature {
                font-size: 1.3rem;
                padding: 0.8rem 1.5rem 1rem 1.5rem;
            }

            .countdown h2 {
                font-size: 2rem;
            }

            .countdown-item {
                min-width: 60px;
                padding: 0.6rem;
            }

            .countdown-number {
                font-size: 1.5rem;
            }

            .countdown-label {
                font-size: 0.7rem;
            }

            .surprise-buttons {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem 0.5rem;
            }

            .star {
                width: 8px;
                height: 8px;
            }
        }

        /* Music Control Styles */
        .music-control {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .music-btn {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #d81b60, #ad1457);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            color: #fff;
            font-size: 1.2rem;
        }

        .music-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(216, 27, 96, 0.6);
        }

        .music-btn:active {
            transform: scale(0.95);
        }

        .volume-control {
            width: 120px;
            background: rgba(255, 245, 247, 0.9);
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border: 1px solid #f8bbd0;
            margin-top: 10px;
            display: none;
            opacity: 0;
            transform: translateY(-10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .volume-control.visible {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .volume-control input {
            width: 100%;
            height: 8px;
            background: #f8bbd0;
            border-radius: 4px;
            outline: none;
            cursor: pointer;
            -webkit-appearance: none;
        }

        .volume-control input::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            background: #d81b60;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }

        .volume-control input::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: #d81b60;
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            border: none;
        }

        /* Responsive adjustments for music controls */
        @media (max-width: 768px) {
            .music-control {
                right: 15px;
                top: 15px;
            }

            .music-btn {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }

            .volume-control {
                width: 100px;
                margin-top: 8px;
            }

            .volume-control input {
                height: 6px;
            }

            .volume-control input::-webkit-slider-thumb {
                width: 14px;
                height: 14px;
            }

            .volume-control input::-moz-range-thumb {
                width: 14px;
                height: 14px;
            }
        }

        @media (max-width: 576px) {
            .music-btn {
                width: 35px;
                height: 35px;
                font-size: 0.9rem;
            }

            .volume-control {
                width: 90px;
            }
        }
    </style>
</head>

<body>
    <div class="decorations" id="decorations-container"></div>
    <div class="music-control">
        <button class="music-btn" id="musicBtn" aria-label="Toggle music">
            <i class="fas fa-play" id="playIcon"></i>
            <i class="fas fa-pause" id="pauseIcon" style="display: none;"></i>
        </button>
        <div class="volume-control" id="volumeControl">
            <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="0.5" aria-label="Volume control">
        </div>
    </div>
    <audio id="backgroundMusic" loop preload="auto">
        <source src="https://dedicapag.com/es//PagProponer/musica.mp3" type="audio/mpeg">
        Tu navegador no soporta el elemento de audio.
    </audio>
    <div class="container">
        <header class="header">
            <h1>Para Mi Persona Favorita, Luz</h1>
            <p>Un nuevo cap√≠tulo comienza, lleno de amor, promesas y momentos eternos.</p>
        </header>

        <section class="celebration">
            <p class="celebration-text">
                Tu &quot;S√ç&quot; ha iluminado mi mundo, y prometo llenar nuestra vida de amor, elegancia y felicidad
                infinita. </p>

            <div class="carousel">
                <div class="image-container"
                    style="background-image: url('https://dedicapag.com/es/PagProponer/Uploads/691cd8341ed41_Captura de pantalla 2025-03-13 155423.png');">
                    <img src="https://dedicapag.com/es/PagProponer/Uploads/691cd8341ed41_Captura de pantalla 2025-03-13 155423.png"
                        alt="Nuestra primera aventura">
                </div>
                <div class="image-container"
                    style="background-image: url('https://dedicapag.com/es/PagProponer/Uploads/691cd8341f0a0_Captura de pantalla 2025-03-13 155504.png');">
                    <img src="https://dedicapag.com/es/PagProponer/Uploads/691cd8341f0a0_Captura de pantalla 2025-03-13 155504.png"
                        alt="Atardeceres juntos">
                </div>
                <div class="carousel-nav">
                    <button id="prev-slide">‚Äπ</button>
                    <button id="next-slide">‚Ä∫</button>
                </div>
            </div>
        </section>

        <div style="text-align: center; margin: 2rem 0;">
            <button class="action-btn" id="openLetterBtn">
                <i class="fas fa-heart"></i> ¬°Mensaje Especial para Ti!
            </button>
        </div>

        <section class="surprises">
            <h2>Sorpresas para Ti</h2>
            <div class="surprise-buttons">
                <button class="action-btn" id="heart-rain-btn">
                    <i class="fas fa-heart"></i> Lluvia de Corazones
                </button>
                <button class="action-btn" id="star-heart-btn">
                    <i class="fas fa-star"></i> Coraz√≥n de Estrellas
                </button>
                <button class="action-btn" id="fireworks-btn">
                    <i class="fas fa-sparkles"></i> Fuegos Artificiales
                </button>
                <button class="action-btn" id="love-letters-btn">
                    <i class="fas fa-envelope-heart"></i> Cartas de Amor
                </button>
            </div>
        </section>

        <section class="promises">
            <h2>Mis Promesas para Ti</h2>
            <div class="promise-list">
                <div class="promise-item">
                    <h3>Amor Eterno</h3>
                    <p>Te amar√© con todo mi coraz√≥n, en cada instante, a trav√©s de todas las estaciones de la vida.</p>
                </div>
                <div class="promise-item">
                    <h3>Respeto Absoluto</h3>
                    <p>Honrar√© tus sue√±os y tu esencia, porque eres mi tesoro m√°s preciado.</p>
                </div>
                <div class="promise-item">
                    <h3>Aventuras Inolvidables</h3>
                    <p>Crearemos una vida llena de vida, viajes, risas y momentos que atesoraremos siempre.</p>
                </div>
                <div class="promise-item">
                    <h3>Crecimiento Juntos</h3>
                    <p>Nos elevaremos mutuamente, celebrando cada triunfo y aprendiendo de cada desaf√≠o.</p>
                </div>
            </div>
        </section>

        <div class="countdown">
            <h2>Tiempo desde un momento especial</h2>
            <div class="countdown-timer" id="countdown-timer">
                <div class="countdown-item">
                    <div class="countdown-number" id="days">00</div>
                    <div class="countdown-label">D√≠as</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="hours">00</div>
                    <div class="countdown-label">Horas</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="minutes">00</div>
                    <div class="countdown-label">Minutos</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="seconds">00</div>
                    <div class="countdown-label">Segundos</div>
                </div>
            </div>
        </div>
    </div>

    <div id="letterOverlay">
        <div class="message-content">
            <button class="close-message" id="closeLetterBtn">√ó</button>
            <h2>Mensaje Especial</h2>
            <div id="typewriterText">
                <!-- Aqu√≠ se carga el contenido de la carta -->
            </div>
            <div class="signature">
                Con amor eterno, hoy y siempre. üíï </div>
        </div>
    </div>

    <footer class="footer">
        <p>Creado con amor eterno para ti ‚ù§Ô∏è</p>
    </footer>

    <script>
        let typewriterTimeout = null;

        function typeLine(lineElement, text, speed = 20, onDone) {
            const textSpan = lineElement.querySelector('.text');
            const cursor = lineElement.querySelector('.cursor');
            const typewriterContainer = document.getElementById('typewriterText');
            textSpan.textContent = '';
            lineElement.classList.add('active');
            let index = 0;

            function typeChar() {
                if (index < text.length) {
                    textSpan.textContent += text.charAt(index);
                    index++;
                    // Scroll to the bottom of the typewriter container smoothly
                    typewriterContainer.scrollTo({
                        top: typewriterContainer.scrollHeight,
                        behavior: 'smooth'
                    });
                    typewriterTimeout = setTimeout(typeChar, speed);
                } else {
                    cursor.style.display = 'none';
                    // Ensure final scroll to bottom when line is complete
                    typewriterContainer.scrollTo({
                        top: typewriterContainer.scrollHeight,
                        behavior: 'smooth'
                    });
                    if (onDone) onDone();
                }
            }

            cursor.style.display = 'inline-block';
            typeChar();
        }

        function openLetterModal() {
            const overlay = document.getElementById('letterOverlay');
            const typewriterText = document.getElementById('typewriterText');
            typewriterText.innerHTML = '';

            const letterContent = `Mi amor, cada momento contigo es un tesoro. Desde el d√≠a en que te conoc√≠, supe que eras mi destino. Gracias por cada risa, cada abrazo, cada sue√±o compartido. Hoy celebramos nuestro amor, y te prometo amarte siempre.`;
            const texts = letterContent.split('\\n').filter(line => line.trim() !== '');

            if (typewriterTimeout) {
                clearTimeout(typewriterTimeout);
                typewriterTimeout = null;
            }

            texts.forEach(() => {
                const line = document.createElement('span');
                line.classList.add('line');
                line.innerHTML = '<span class="text"></span><span class="cursor"></span>';
                typewriterText.appendChild(line);
                typewriterText.appendChild(document.createElement('br'));
            });

            const lines = typewriterText.querySelectorAll('.line');

            overlay.classList.add('show');

            function typeNextLine(index) {
                if (index < lines.length && index < texts.length) {
                    typeLine(lines[index], texts[index], 20, () => {
                        typeNextLine(index + 1);
                    });
                } else {
                    lines.forEach(line => line.querySelector('.cursor').style.display = 'none');
                }
            }

            typeNextLine(0);
        }

        document.getElementById('openLetterBtn').addEventListener('click', openLetterModal);

        document.getElementById('closeLetterBtn').addEventListener('click', () => {
            const overlay = document.getElementById('letterOverlay');
            const typewriterText = document.getElementById('typewriterText');

            if (typewriterTimeout) {
                clearTimeout(typewriterTimeout);
                typewriterTimeout = null;
            }

            typewriterText.innerHTML = '';

            overlay.classList.remove('show');
        });

        window.onclick = function (event) {
            const overlay = document.getElementById('letterOverlay');
            if (event.target === overlay) {
                const typewriterText = document.getElementById('typewriterText');

                if (typewriterTimeout) {
                    clearTimeout(typewriterTimeout);
                    typewriterTimeout = null;
                }

                typewriterText.innerHTML = '';

                overlay.classList.remove('show');
            }
        };

        const slideElements = document.querySelectorAll('.carousel .image-container');
        const prevButton = document.getElementById('prev-slide');
        const nextButton = document.getElementById('next-slide');

        let currentSlide = 0;
        const totalSlides = slideElements.length;

        function showSlide(index) {
            if (index >= totalSlides) {
                index = 0;
            } else if (index < 0) {
                index = totalSlides - 1;
            }

            slideElements[currentSlide].classList.remove('active');
            slideElements[currentSlide].style.transform = 'translateX(-100%)';

            currentSlide = index;
            slideElements[currentSlide].classList.add('active');
            slideElements[currentSlide].style.transform = 'translateX(0)';
        }

        if (totalSlides > 0) {
            prevButton.addEventListener('click', () => {
                showSlide(currentSlide - 1);
            });

            nextButton.addEventListener('click', () => {
                showSlide(currentSlide + 1);
            });

            slideElements[0].classList.add('active');

            setInterval(() => {
                showSlide(currentSlide + 1);
            }, 5000);
        }

        const countdownDate = new Date('2025-05-01').getTime();
        if (!isNaN(countdownDate)) {
            const countdownTimer = setInterval(() => {
                const now = new Date().getTime();
                const distance = now - countdownDate;

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                document.getElementById('days').textContent = String(days).padStart(2, '0');
                document.getElementById('hours').textContent = String(hours).padStart(2, '0');
                document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
                document.getElementById('seconds').textContent = String(seconds).padStart(2, '0');
            }, 1000);
        } else {
            document.getElementById('days').textContent = '00';
            document.getElementById('hours').textContent = '00';
            document.getElementById('minutes').textContent = '00';
            document.getElementById('seconds').textContent = '00';
        }

        const decorationsContainer = document.getElementById('decorations-container');

        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.innerHTML = '‚ù§Ô∏è';
            heart.style.left = `${Math.random() * 100}vw`;
            heart.style.animationDuration = `${Math.random() * 5 + 5}s`;
            decorationsContainer.appendChild(heart);
            setTimeout(() => heart.remove(), 8000);
        }

        function createStarHeart() {
            const points = [];
            const numStars = 80;
            const isMobile = window.matchMedia("(max-width: 768px)").matches;
            const scaleFactor = isMobile ? 0.6 : 1;

            for (let i = 0; i < numStars; i++) {
                const t = (i / numStars) * 2 * Math.PI;
                const x = 16 * Math.pow(Math.sin(t), 3);
                const y = -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));
                points.push({ x: x * 16 * scaleFactor, y: y * 12 * scaleFactor });
            }

            points.forEach((point, index) => {
                setTimeout(() => {
                    const star = document.createElement('div');
                    star.classList.add('star');
                    star.style.position = 'absolute';
                    star.style.left = `calc(50vw + ${point.x}px)`;
                    star.style.top = `calc(50vh + ${point.y}px)`;
                    star.style.background = 'linear-gradient(45deg, #ff0000, #cc0000)';
                    star.style.width = isMobile ? '25px' : '35px';
                    star.style.height = isMobile ? '25px' : '35px';
                    star.style.clipPath = 'polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)';
                    star.style.boxShadow = '0 0 12px rgba(255, 0, 0, 0.9)';
                    decorationsContainer.appendChild(star);
                    setTimeout(() => star.remove(), 10000);
                }, index * 50);
            });
        }

        function createFirework() {
            const firework = document.createElement('div');
            firework.classList.add('firework');
            const hue = Math.random() * 360;
            firework.style.setProperty('--c', `hsl(${hue}, 100%, 55%)`);
            firework.style.left = `${Math.random() * 80 + 10}vw`;
            decorationsContainer.appendChild(firework);

            const trailInterval = setInterval(() => {
                const trail = document.createElement('div');
                trail.classList.add('firework-particle', 'trail');
                trail.style.left = firework.style.left;
                trail.style.top = firework.style.top;
                trail.style.setProperty('--c', `hsl(${hue}, 100%, 65%)`);
                trail.style.width = `${Math.random() * 4 + 4}px`;
                trail.style.height = `${Math.random() * 8 + 6}px`;
                trail.style.opacity = '5.9';
                trail.style.transform = `rotate(${Math.random() * 360}deg)`;
                decorationsContainer.appendChild(trail);
                setTimeout(() => trail.remove(), 600);
            }, 20);

            setTimeout(() => {
                clearInterval(trailInterval);
                firework.style.display = 'none';

                const explosionType = Math.random();
                let particleCount, radius, pattern;
                if (explosionType < 0.4) {
                    particleCount = Math.floor(Math.random() * 60 + 80);
                    radius = Math.random() * 200 + 150;
                    pattern = 'circular';
                } else if (explosionType < 0.7) {
                    particleCount = Math.floor(Math.random() * 40 + 60);
                    radius = Math.random() * 180 + 120;
                    pattern = 'star';
                } else {
                    particleCount = Math.floor(Math.random() * 50 + 70);
                    radius = Math.random() * 160 + 100;
                    pattern = 'ring';
                }

                for (let i = 0; i < particleCount; i++) {
                    const particle = document.createElement('div');
                    particle.classList.add('firework-particle');
                    particle.style.left = firework.style.left;
                    particle.style.top = '20vh';
                    const particleHue = hue + (Math.random() * 20 - 10);
                    const neonColor = `hsl(${particleHue}, 100%, 55%)`;
                    particle.style.background = neonColor;
                    particle.style.boxShadow = `
                        0 0 6px ${neonColor},
                        0 0 12px ${neonColor},
                        0 0 20px ${neonColor}`;
                    particle.style.filter = 'brightness(1.4) contrast(1.2)';

                    particle.style.width = `${Math.random() * 6 + 4}px`;
                    particle.style.height = particle.style.width;
                    particle.style.opacity = '5.9';
                    particle.style.filter = 'blur(0.3px)';

                    let angle, distance;
                    if (pattern === 'star') {
                        const starPoints = 5;
                        angle = (i % starPoints) * (360 / starPoints) + (Math.random() * 20 - 10);
                        distance = radius * (Math.floor(i / starPoints) % 2 === 0 ? 1 : 0.5);
                    } else if (pattern == 'ring') {
                        angle = (i / particleCount) * 360;
                        distance = radius * (1 + Math.random() * 0.1);
                    } else {
                        angle = Math.random() * 360;
                        distance = radius * Math.sqrt(Math.random());
                    }

                    const vx = Math.cos(angle * Math.PI / 180) * distance;
                    const vy = Math.sin(angle * Math.PI / 180) * distance + 50;
                    particle.style.setProperty('--px', `${vx}px`);
                    particle.style.setProperty('--py', `${vy}px`);
                    particle.style.animationDelay = `${Math.random() * 0.4}s`;
                    decorationsContainer.appendChild(particle);
                    setTimeout(() => particle.remove(), 1500);

                    if (Math.random() < 0.3) {
                        const sparkleInterval = setInterval(() => {
                            const sparkle = document.createElement('div');
                            sparkle.classList.add('firework-particle', 'sparkle');
                            sparkle.style.left = particle.style.left;
                            sparkle.style.top = particle.style.top;
                            sparkle.style.background = `hsl(${particleHue}, 80%, 90%)`;
                            sparkle.style.width = '3px';
                            sparkle.style.height = '3px';
                            sparkle.style.opacity = '0.6';
                            sparkle.style.filter = 'blur(1px)';
                            decorationsContainer.appendChild(sparkle);
                            setTimeout(() => sparkle.remove(), 400);
                        }, 50);
                        setTimeout(() => clearInterval(sparkleInterval), 800);
                    }
                }

                if (Math.random() < 0.4) {
                    setTimeout(() => {
                        const secondaryCount = Math.floor(Math.random() * 30 + 40);
                        for (let i = 0; i < secondaryCount; i++) {
                            const particle = document.createElement('div');
                            particle.classList.add('firework-particle');
                            particle.style.left = firework.style.left;
                            particle.style.top = '25vh';
                            const particleHue = hue + (Math.random() * 30 - 15);
                            particle.style.background = `hsl(${particleHue}, 80%, ${Math.random() * 15 + 65}%)`;
                            particle.style.width = `${Math.random() * 5 + 3}px`;
                            particle.style.height = particle.style.width;
                            particle.style.opacity = '0.8';
                            particle.style.boxShadow = `0 0 6px hsl(${particleHue}, 80%, 85%)`;
                            const angle = Math.random() * 360;
                            const distance = (Math.random() * 100 + 50);
                            particle.style.setProperty('--px', `${Math.cos(angle * Math.PI / 180) * distance}px`);
                            particle.style.setProperty('--py', `${Math.sin(angle * Math.PI / 180) * distance}px`);
                            particle.style.animationDelay = `${Math.random() * 0.2}s`;
                            decorationsContainer.appendChild(particle);
                            setTimeout(() => particle.remove(), 1200);
                        }
                    }, 300);
                }

                setTimeout(() => firework.remove(), 1500);
            }, 1500);
        }

        function createLoveLetter() {
            const letter = document.createElement('div');
            letter.classList.add('love-letter');
            const messages = ["\u2764\ufe0f Eres mi todo", "\u2764\ufe0f Mi amor eterno", "\ud83d\udc8c Juntos por siempre", "\ud83e\udd70 Te adoro"];
            letter.textContent = messages[Math.floor(Math.random() * messages.length)];
            letter.style.left = `${Math.random() * 100}vw`;
            letter.style.animationDuration = `${Math.random() * 6 + 6}s`;
            decorationsContainer.appendChild(letter);
            setTimeout(() => letter.remove(), 12000);
        }

        document.getElementById('heart-rain-btn').addEventListener('click', () => {
            for (let i = 0; i < 20; i++) {
                setTimeout(createHeart, i * 100);
            }
        });

        document.getElementById('star-heart-btn').addEventListener('click', createStarHeart);

        document.getElementById('fireworks-btn').addEventListener('click', () => {
            for (let i = 0; i < 5; i++) {
                setTimeout(createFirework, i * 300);
            }
        });

        document.getElementById('love-letters-btn').addEventListener('click', () => {
            for (let i = 0; i < 10; i++) {
                setTimeout(createLoveLetter, i * 200);
            }
        });
        function setupMusicControls() {
            const music = document.getElementById("backgroundMusic");
            const musicBtn = document.getElementById("musicBtn");
            const playIcon = document.getElementById("playIcon");
            const pauseIcon = document.getElementById("pauseIcon");
            const volumeSlider = document.getElementById("volumeSlider");
            const volumeControl = document.getElementById("volumeControl");

            if (!music || !musicBtn || !volumeSlider || !volumeControl) {
                console.error('Music or control elements not found');
                return;
            }

            music.volume = volumeSlider.value;

            // Attempt autoplay
            music.load();
            music.currentTime = 0;
            music.play().then(() => {
                console.log('Autoplay successful at:', music.currentTime);
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'inline-block';
            }).catch(error => {
                console.warn('Autoplay blocked:', error.message);
            });

            function toggleMusic() {
                if (music.paused) {
                    music.play().then(() => {
                        console.log('Music playing at:', music.currentTime);
                        playIcon.style.display = 'none';
                        pauseIcon.style.display = 'inline-block';
                    }).catch(error => {
                        console.error('Error playing audio:', error.message);
                    });
                } else {
                    music.pause();
                    console.log('Music paused at:', music.currentTime);
                    playIcon.style.display = 'inline-block';
                    pauseIcon.style.display = 'none';
                }
            }

            musicBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                toggleMusic();
                if (!volumeControl.classList.contains('visible')) {
                    volumeControl.classList.add('visible');
                    clearTimeout(hideVolumeTimeout);
                    hideVolumeTimeout = setTimeout(() => volumeControl.classList.remove('visible'), 2000);
                } else {
                    volumeControl.classList.remove('visible');
                }
            });

            let hideVolumeTimeout = null;
            volumeSlider.addEventListener('input', (e) => {
                music.volume = e.target.value;
                console.log('Volume set to:', music.volume);
                clearTimeout(hideVolumeTimeout);
                volumeControl.classList.add('visible');
            });

            volumeSlider.addEventListener('change', () => {
                hideVolumeTimeout = setTimeout(() => volumeControl.classList.remove('visible'), 2000);
            });

            volumeControl.addEventListener('mouseenter', () => clearTimeout(hideVolumeTimeout));
            volumeControl.addEventListener('mouseleave', () => {
                hideVolumeTimeout = setTimeout(() => volumeControl.classList.remove('visible'), 2000);
            });

            volumeSlider.addEventListener('touchstart', (e) => {
                e.stopPropagation();
                clearTimeout(hideVolumeTimeout);
            });
            volumeSlider.addEventListener('touchend', () => {
                hideVolumeTimeout = setTimeout(() => volumeControl.classList.remove('visible'), 2000);
            });

            document.addEventListener('click', (e) => {
                if (!volumeControl.contains(e.target) && !musicBtn.contains(e.target)) {
                    volumeControl.classList.remove('visible');
                    clearTimeout(hideVolumeTimeout);
                }
            });

            music.addEventListener('loadeddata', () => console.log('Audio data loaded'));
            music.addEventListener('error', (e) => console.error('Audio error:', e.message));
            music.addEventListener('play', () => console.log('Music play event'));
            music.addEventListener('pause', () => console.log('Music pause event'));
        }

        // Initialize music controls when the page loads
        setupMusicControls();
    </script>
</body>

</html>